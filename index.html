<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Ansiedad</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css">

    <style>
        .container {
            max-width: 800px;
            margin: auto;
            padding: 2rem;
        }
        .question {
            margin-bottom: 1.5rem;
        }
        .question label {
            display: block;
            margin-bottom: 0.5rem;
        }
        .question input[type="radio"] {
            margin-right: 0.5rem;
        }
        .notification-custom {
            background-color: #3273dc; /* Color de fondo azul */
            color: #ffffff; /* Color del texto blanco */
            border-radius: 5px;
            padding: 1rem;
            font-weight: bold;
            display: none; /* Oculto por defecto */
        }

        .button-container {
            margin-top: 1.5rem;
        }
    </style>


</head>
<body>
    <section class="section">
        <div class="container">
            <h1 class="title">Test de Ansiedad de Beck</h1>
            <form id="beckForm">
                <div class="question" id="group-q0">
                    <label class="has-text-weight-medium">1. Torpe o entumecido</label>
                    <label><input type="radio" name="q0" value="0"> No</label>
                    <label><input type="radio" name="q0" value="1"> Leve</label>
                    <label><input type="radio" name="q0" value="2"> Moderado</label>
                    <label><input type="radio" name="q0" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q1">
                    <label class="has-text-weight-medium">2. Acalorado</label>
                    <label><input type="radio" name="q1" value="0"> No</label>
                    <label><input type="radio" name="q1" value="1"> Leve</label>
                    <label><input type="radio" name="q1" value="2"> Moderado</label>
                    <label><input type="radio" name="q1" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q2">
                    <label class="has-text-weight-medium">3. Con temblor en las piernas</label>
                    <label><input type="radio" name="q2" value="0"> No</label>
                    <label><input type="radio" name="q2" value="1"> Leve</label>
                    <label><input type="radio" name="q2" value="2"> Moderado</label>
                    <label><input type="radio" name="q2" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q3">
                    <label class="has-text-weight-medium">4. Incapaz de relajarse</label>
                    <label><input type="radio" name="q3" value="0"> No</label>
                    <label><input type="radio" name="q3" value="1"> Leve</label>
                    <label><input type="radio" name="q3" value="2"> Moderado</label>
                    <label><input type="radio" name="q3" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q4">
                    <label class="has-text-weight-medium">5. Con temor a que ocurra lo peor</label>
                    <label><input type="radio" name="q4" value="0"> No</label>
                    <label><input type="radio" name="q4" value="1"> Leve</label>
                    <label><input type="radio" name="q4" value="2"> Moderado</label>
                    <label><input type="radio" name="q4" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q5">
                    <label class="has-text-weight-medium">6. Mareado, o que se le va la cabeza</label>
                    <label><input type="radio" name="q5" value="0"> No</label>
                    <label><input type="radio" name="q5" value="1"> Leve</label>
                    <label><input type="radio" name="q5" value="2"> Moderado</label>
                    <label><input type="radio" name="q5" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q6">
                    <label class="has-text-weight-medium">7. Con latidos del corazón fuertes y acelerados</label>
                    <label><input type="radio" name="q6" value="0"> No</label>
                    <label><input type="radio" name="q6" value="1"> Leve</label>
                    <label><input type="radio" name="q6" value="2"> Moderado</label>
                    <label><input type="radio" name="q6" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q7">
                    <label class="has-text-weight-medium">8. Inestable</label>
                    <label><input type="radio" name="q7" value="0"> No</label>
                    <label><input type="radio" name="q7" value="1"> Leve</label>
                    <label><input type="radio" name="q7" value="2"> Moderado</label>
                    <label><input type="radio" name="q7" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q8">
                    <label class="has-text-weight-medium">9. Atemorizado o asustado</label>
                    <label><input type="radio" name="q8" value="0"> No</label>
                    <label><input type="radio" name="q8" value="1"> Leve</label>
                    <label><input type="radio" name="q8" value="2"> Moderado</label>
                    <label><input type="radio" name="q8" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q9">
                    <label class="has-text-weight-medium">10. Nervioso</label>
                    <label><input type="radio" name="q9" value="0"> No</label>
                    <label><input type="radio" name="q9" value="1"> Leve</label>
                    <label><input type="radio" name="q9" value="2"> Moderado</label>
                    <label><input type="radio" name="q9" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q10">
                    <label class="has-text-weight-medium">11. Con sensación de bloqueo</label>
                    <label><input type="radio" name="q10" value="0"> No</label>
                    <label><input type="radio" name="q10" value="1"> Leve</label>
                    <label><input type="radio" name="q10" value="2"> Moderado</label>
                    <label><input type="radio" name="q10" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q11">
                    <label class="has-text-weight-medium">12. Con temblores en las manos</label>
                    <label><input type="radio" name="q11" value="0"> No</label>
                    <label><input type="radio" name="q11" value="1"> Leve</label>
                    <label><input type="radio" name="q11" value="2"> Moderado</label>
                    <label><input type="radio" name="q11" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q12">
                    <label class="has-text-weight-medium">13. Inquieto, inseguro</label>
                    <label><input type="radio" name="q12" value="0"> No</label>
                    <label><input type="radio" name="q12" value="1"> Leve</label>
                    <label><input type="radio" name="q12" value="2"> Moderado</label>
                    <label><input type="radio" name="q12" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q13">
                    <label class="has-text-weight-medium">14. Con miedo a perder el control</label>
                    <label><input type="radio" name="q13" value="0"> No</label>
                    <label><input type="radio" name="q13" value="1"> Leve</label>
                    <label><input type="radio" name="q13" value="2"> Moderado</label>
                    <label><input type="radio" name="q13" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q14">
                    <label class="has-text-weight-medium">15. Con sensación de ahogo</label>
                    <label><input type="radio" name="q14" value="0"> No</label>
                    <label><input type="radio" name="q14" value="1"> Leve</label>
                    <label><input type="radio" name="q14" value="2"> Moderado</label>
                    <label><input type="radio" name="q14" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q15">
                    <label class="has-text-weight-medium">16. Con temor a morir</label>
                    <label><input type="radio" name="q15" value="0"> No</label>
                    <label><input type="radio" name="q15" value="1"> Leve</label>
                    <label><input type="radio" name="q15" value="2"> Moderado</label>
                    <label><input type="radio" name="q15" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q16">
                    <label class="has-text-weight-medium">17. Con miedo</label>
                    <label><input type="radio" name="q16" value="0"> No</label>
                    <label><input type="radio" name="q16" value="1"> Leve</label>
                    <label><input type="radio" name="q16" value="2"> Moderado</label>
                    <label><input type="radio" name="q16" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q17">
                    <label class="has-text-weight-medium">18. Con problemas digestivos</label>
                    <label><input type="radio" name="q17" value="0"> No</label>
                    <label><input type="radio" name="q17" value="1"> Leve</label>
                    <label><input type="radio" name="q17" value="2"> Moderado</label>
                    <label><input type="radio" name="q17" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q18">
                    <label class="has-text-weight-medium">19. Con desvanecimientos</label>
                    <label><input type="radio" name="q18" value="0"> No</label>
                    <label><input type="radio" name="q18" value="1"> Leve</label>
                    <label><input type="radio" name="q18" value="2"> Moderado</label>
                    <label><input type="radio" name="q18" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q19">
                    <label class="has-text-weight-medium">20. Con rubor facial</label>
                    <label><input type="radio" name="q19" value="0"> No</label>
                    <label><input type="radio" name="q19" value="1"> Leve</label>
                    <label><input type="radio" name="q19" value="2"> Moderado</label>
                    <label><input type="radio" name="q19" value="3"> Bastante</label>
                </div>
                <div class="question" id="group-q20">
                    <label class="has-text-weight-medium">21. Con sudores, fríos o calientes</label>
                    <label><input type="radio" name="q20" value="0"> No</label>
                    <label><input type="radio" name="q20" value="1"> Leve</label>
                    <label><input type="radio" name="q20" value="2"> Moderado</label>
                    <label><input type="radio" name="q20" value="3"> Bastante</label>
                </div>
                <div class="button-container">
                    <button type="button" class="button is-primary" onclick="calculateScore()">Calcular Resultado</button>
                    <button type="reset" class="button is-light" id="resetButton">Resetear</button>
                </div>
            </form>

			<br>
			
			
			<div id="result" class="notification-custom" style="display: none;"></div>
			<div id="error-message" class="notification is-danger" style="display: none;" role="alert"></div>


        </div>
    </section>

    <script>
	
	    document.getElementById('resetButton').addEventListener('click', function() {
			location.reload();
		});
	
	
		// Función para validar un grupo de radio buttons
		function validarSeleccion(name, groupId) {
			var opciones = document.getElementsByName(name);
			var grupo = document.getElementById(groupId);
			var primerLabel = grupo.querySelector('label'); 

			// Verifica si el grupo existe
			if (!grupo) {
				console.error(`El grupo con id ${groupId} no existe.`);
				return false; // Retorna false si el grupo no existe
			}


			// Verifica si alguna opción está seleccionada
			for (var i = 0; i < opciones.length; i++) {
				if (opciones[i].checked) {
				    grupo.classList.remove('is-invalid'); // Quita el borde rojo si está seleccionado
				     primerLabel.classList.remove('has-text-danger');
				    return true;
				}
			}

					// Si no hay selección, añade clase i
			grupo.classList.add('is-invalid'); // Marca el grupo como inválido
			primerLabel.classList.add('has-text-danger');
			return false;
		}
	
	
	
	
	
        function calculateScore() {
        
            const errorDiv = document.getElementById('error-message');
		    errorDiv.style.display = 'none'; 
        
            let totalScore = 0;
            const form = document.getElementById('beckForm');
            const inputs = form.querySelectorAll('input[type="radio"]:checked');
            const totalQuestions = 21;
            let answeredQuestions = new Set();
            let allValid = true;
            
            
			// Validar cada pregunta (grupo de opciones) antes de calcular el puntaje
			for (let i = 0; i < totalQuestions; i++) {
				const groupId = `group-q${i}`;
				if (!validarSeleccion(`q${i}`, groupId)) {
				    allValid = false;
				}
			}

			if (allValid === null || allValid === undefined || !allValid) {
				const errorDiv = document.getElementById('error-message'); // Obtiene el div del mensaje de error
				errorDiv.textContent = "Por favor, completa todas las preguntas antes de continuar.";
				errorDiv.style.display = 'block'; // Muestra el mensaje de error
				return; // Detiene el cálculo si alguna pregunta no ha sido respondida
			}     
            

            inputs.forEach(input => {
                totalScore += parseInt(input.value);
                const questionIndex = input.name.match(/\d+/)[0];
                answeredQuestions.add(questionIndex);
            });

            let resultText = '';

			if (totalScore <= 10) {
				resultText = 'Ansiedad baja.';
			} else if (totalScore <= 30) {
				resultText = 'Ansiedad moderada.';
			} else if (totalScore <= 50) {
				resultText = 'Ansiedad alta.';
			} else {
				resultText = 'Ansiedad muy alta.';
			}

            // Muestra el contenedor de resultado
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = `Puntuación total: ${totalScore}. ${resultText}`;
            resultDiv.style.display = 'block'; // Muestra el resultado

        }
        
        
        

        
        
    </script>

</body>
</html>



